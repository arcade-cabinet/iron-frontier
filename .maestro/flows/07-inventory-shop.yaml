# Iron Frontier E2E Test: Inventory & Shop
# Tests inventory management and shop interactions

appId: ${ANDROID_APP_ID}
name: Inventory and Shop Test
tags:
  - inventory
  - shop
  - economy
  - p1

---
# Open inventory (via menu or hotkey)
- tapOn:
    text: "Inventory"
    optional: true
- tapOn:
    text: "Menu"
    optional: true

# Wait for inventory panel
- assertVisible:
    id: "inventory-panel"
    timeout: ${DEFAULT_TIMEOUT}
    optional: true

- runFlow:
    when:
      visible:
        id: "inventory-panel"
    commands:
      - takeScreenshot: screenshots/07-inventory-open

      # Check for item slots
      - assertVisible:
          id: "inventory-slots"
          optional: true

      # Check gold display
      - assertVisible:
          text: "Gold"
          optional: true

      # Close inventory
      - tapOn:
          text: "Close"
          optional: true
      - tapOn:
          text: "X"
          optional: true

# Test shop if accessible
- tapOn:
    text: "Shop"
    optional: true

- runFlow:
    when:
      visible:
        text: "Buy"
    commands:
      - takeScreenshot: screenshots/07-shop-open

      # Verify shop elements
      - assertVisible:
          text: "Sell"
          optional: true

      # Check item list
      - assertVisible:
          id: "shop-items"
          optional: true

      # Close shop
      - tapOn:
          text: "Leave"
          optional: true
      - tapOn:
          text: "Close"
          optional: true

# Check no errors occurred
- assertNotVisible:
    text: "Error"
    optional: true

- takeScreenshot: screenshots/07-inventory-shop-complete
