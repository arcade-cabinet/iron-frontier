# Main Menu Navigation Test - Iron Frontier
# Tests navigation through all main menu options
# Verifies About modal, menu buttons, and UI responsiveness

appId: com.ironfrontier.mobile
name: "Main Menu Navigation"
tags:
  - navigation
  - menu

---

# Launch the app with clean state
- launchApp:
    appId: com.ironfrontier.mobile
    clearState: true

# Wait for main menu to fully load (after splash)
- extendedWaitUntil:
    visible: "Tales of the Steam Frontier"
    timeout: 15000

# Take screenshot of initial main menu state
- takeScreenshot: screenshots/03_main_menu_initial

# Test 1: Open About modal
- tapOn:
    text: "About"

# Wait for About modal to appear
- extendedWaitUntil:
    visible: "About Iron Frontier"
    timeout: 3000

# Verify About modal content
- assertVisible:
    text: "About Iron Frontier"

- assertVisible:
    text: "mobile-first isometric RPG"

- assertVisible:
    text: "steampunk American frontier"

# Take screenshot of About modal
- takeScreenshot: screenshots/04_about_modal

# Close About modal
- tapOn:
    text: "Close"

# Verify we're back to main menu
- extendedWaitUntil:
    visible: "Tales of the Steam Frontier"
    timeout: 3000

# Take screenshot after closing About
- takeScreenshot: screenshots/05_main_menu_after_about

# Test 2: Verify Begin Adventure / New Game button is tappable
# The button text depends on whether there's saved data
- assertVisible:
    text: ".*Adventure|.*New Game.*"
    regex: true

# Tap to initiate new game flow (will show name input)
- tapOn:
    text: ".*Adventure|.*New Game.*"
    regex: true

# Wait for name input to appear
- extendedWaitUntil:
    visible: "Enter your name, stranger..."
    timeout: 3000

# Take screenshot of name input screen
- takeScreenshot: screenshots/06_name_input_screen

# Verify Back button is present
- assertVisible:
    text: "Back"

# Verify Start button is present (disabled until name entered)
- assertVisible:
    text: "Start"

# Test 3: Go back to main menu
- tapOn:
    text: "Back"

# Verify we're back to main menu
- extendedWaitUntil:
    visible: "Tales of the Steam Frontier"
    timeout: 3000

- takeScreenshot: screenshots/07_main_menu_final

# Test passes
- runScript:
    script: |
      console.log('Main menu navigation test completed successfully');
      output.menuNavigationSuccess = true;
